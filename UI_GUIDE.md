# 知识库功能界面指南 / Knowledge Base UI Guide

## 界面概览 / UI Overview

知识库功能已集成到主界面的设置部分，通过左侧标签栏中的"设置"进入，然后选择"知识库"选项。

### 主界面导航 / Main Interface Navigation

```
┌─────────────────────────────────────────────────────────────┐
│ 用户头像区域                                                  │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  🧩  📚  ⚙️                                                 │
│ 插件  历史  设置                                              │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│ 设置选项列表:                                                 │
│ 🔑 AI 服务提供商                                             │
│ ⌨️  输入法                                                   │
│ 🖥️  模型选择                                                 │
│ 📚 知识库                    ← 新增功能                       │
├─────────────────────────────────────────────────────────────┤
│ 🌙 暗黑模式                                                  │
└─────────────────────────────────────────────────────────────┘
```

## 界面组件详解 / UI Components Detailed

### 1. 知识库设置主界面 / Main Knowledge Base Settings

**布局结构:**
```
┌─────────────────────────────────────────────────────────────┐
│ 知识库设置                                    [+ 添加知识库]  │
│ 配置和管理您的知识库，支持本地文件夹、网站爬虫和企业API     │
├─────────────────────────────────────────────────────────────┤
│ 已配置的知识库                                    3个知识库  │
│                                                             │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 📁 我的文档库                              ✅ 就绪       │ │
│ │    本地文件夹                                [开关] [⚙️][🗑️] │ │
│ │    包含1000个文档向量                                    │ │
│ │    最后更新: 2小时前                                     │ │
│ └─────────────────────────────────────────────────────────┘ │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 🌐 官网内容                                🟡 需要爬取   │ │
│ │    网站爬虫                                  [开关] [⚙️][🗑️] │ │
│ │    https://example.com                                  │ │
│ │    最后更新: 1天前                                      │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

**组件说明:**
- 🔵 **标题栏**: 显示"知识库设置"和"添加知识库"按钮
- 🟢 **描述文本**: 简要说明功能作用
- 🟡 **统计信息**: 显示已配置知识库数量
- 🟣 **知识库卡片**: 每个知识库的详细信息

### 2. 知识库卡片组件 / Knowledge Base Card Component

**卡片结构:**
```
┌─────────────────────────────────────────────────────────────┐
│ [图标] 知识库名称                        [状态标识]         │
│        类型描述                              [开关] [操作]   │
│        统计信息 (文档数, 向量数)                            │
│        最后更新时间                                         │
└─────────────────────────────────────────────────────────────┘
```

**状态标识颜色:**
- 🟢 绿色圆点 = 就绪 (Ready)
- 🟡 橙色圆点 = 需要处理 (Needs Processing)  
- 🔴 红色圆点 = 错误 (Error)
- 🔵 蓝色圆点 = 处理中 (Processing)
- ⚪ 灰色圆点 = 已禁用 (Disabled)

### 3. 添加知识库界面 / Add Knowledge Base Interface

**弹窗布局:**
```
┌─────────────────────────────────────────────────────────────┐
│ 添加知识库                                          [×]     │
├─────────────────────────────────────────────────────────────┤
│ 基本信息                                                     │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 知识库名称: [________________________]                  │ │
│ │ 描述(可选): [________________________]                  │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ 知识库类型                                                   │
│ ┌─────────┐  ┌─────────┐  ┌─────────┐                      │
│ │   📁    │  │   🌐    │  │   🏢    │                      │
│ │本地文件夹 │  │ 网站爬虫 │  │ 企业API │                      │
│ │索引本地文档│  │爬取网站内容│  │连接企业API│                      │
│ └─────────┘  └─────────┘  └─────────┘                      │
│                                                             │
│ 配置                                                         │
│ [根据选择的类型显示不同配置选项]                              │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│                                    [取消]        [保存]     │
└─────────────────────────────────────────────────────────────┘
```

### 4. 类型特定配置界面 / Type-Specific Configuration

#### 4.1 本地文件夹配置 / Local Folder Configuration
```
配置
┌─────────────────────────────────────────────────────────────┐
│ 文件夹路径                                                   │
│ [/Users/user/Documents/knowledge] [浏览]                    │
│                                                             │
│ ☑️ 包含子文件夹                                              │
│                                                             │
│ 支持的文件扩展名                                             │
│ [txt,md,pdf]                                               │
│ 用逗号分隔多个扩展名，如：txt,md,pdf                         │
└─────────────────────────────────────────────────────────────┘
```

#### 4.2 网站爬虫配置 / Web Crawler Configuration
```
配置  
┌─────────────────────────────────────────────────────────────┐
│ 网站地址                                                     │
│ [https://example.com]                                      │
│                                                             │
│ 爬取深度          ●────●────●────●────●                     │
│                   1    2    3    4    5                    │
│ 从起始页面开始的链接深度                                     │
│                                                             │
│ 最大页面数                                                   │
│ [100]                                                      │
│                                                             │
│ ☑️ 遵循robots.txt                                           │
└─────────────────────────────────────────────────────────────┘
```

#### 4.3 企业API配置 / Enterprise API Configuration  
```
配置
┌─────────────────────────────────────────────────────────────┐
│ API端点                                                      │
│ [https://api.company.com/knowledge]                        │
│                                                             │
│ API密钥                                                      │
│ [●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●]                        │
│                                                             │
│ 超时时间（秒）                                               │
│ [30]                                                       │
└─────────────────────────────────────────────────────────────┘
```

### 5. 编辑知识库界面 / Edit Knowledge Base Interface

**扩展功能界面:**
```
┌─────────────────────────────────────────────────────────────┐
│ 编辑知识库                                          [×]     │
│ 📁 本地文件夹    🟢 就绪                                     │
├─────────────────────────────────────────────────────────────┤
│ 当前状态                                                     │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 状态: 🟢 就绪          最后更新: 2小时前                  │ │
│ │ 1,000 个向量           [启用 ◉]                          │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ 基本信息                                                     │
│ [与添加界面相同的基本信息编辑]                               │
│                                                             │
│ 配置                                                         │
│ [类型特定的配置选项]                                         │
│                                                             │
│ 操作                                                         │
│ ┌─────────────┐ ┌─────────────┐                            │
│ │  🔄 索引文件 │ │  🗑️ 清空数据 │                            │
│ │扫描并索引文档│ │删除所有向量数据│                            │
│ └─────────────┘ └─────────────┘                            │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│                                [取消]      [保存更改]       │
└─────────────────────────────────────────────────────────────┘
```

## 交互流程 / Interaction Flow

### 添加知识库流程 / Add Knowledge Base Flow
```
开始 → 点击"添加知识库" → 填写基本信息 → 选择类型 → 配置参数 → 验证 → 保存
  ↑                                                              ↓
  └──────────────── 如有错误返回修改 ←─────────────────────────────┘
```

### 处理知识库流程 / Process Knowledge Base Flow  
```
选择知识库 → 点击配置 → 选择处理操作 → 确认开始 → 显示进度 → 完成/错误处理
     ↑                                       ↓           ↓
     └─────────── 可随时取消 ←─────────────────┴───────────┘
```

## 视觉设计规范 / Visual Design Guidelines

### 颜色系统 / Color System
- **主色调**: 系统蓝色 (`Color.accentColor`)
- **成功状态**: 绿色 (`Color.green`) 
- **警告状态**: 橙色 (`Color.orange`)
- **错误状态**: 红色 (`Color.red`)
- **处理状态**: 蓝色 (`Color.blue`)
- **禁用状态**: 灰色 (`Color.secondary`)

### 图标系统 / Icon System
- 📁 `folder.fill` - 本地文件夹
- 🌐 `globe` - 网站爬虫
- 🏢 `server.rack` - 企业API
- ⚙️ `gear` - 配置/设置
- 🗑️ `trash` - 删除
- ➕ `plus` - 添加
- 🔄 `arrow.clockwise` - 刷新/处理
- ✅ `checkmark.circle.fill` - 成功/就绪
- ❌ `xmark.circle.fill` - 关闭/错误

### 布局原则 / Layout Principles
- **间距**: 使用8pt网格系统 (8, 16, 24, 32px)
- **圆角**: 统一使用8px圆角
- **字体**: 系统字体，标题使用semibold，正文使用regular
- **对比度**: 确保足够的颜色对比度便于阅读

## 响应式设计 / Responsive Design

### 窗口尺寸适配 / Window Size Adaptation
- **最小宽度**: 800px
- **推荐宽度**: 1024px以上
- **弹窗宽度**: 600-700px
- **侧边栏宽度**: 220-320px（可调节）

### 内容优先级 / Content Priority
1. **核心功能**: 添加、编辑、删除知识库
2. **状态信息**: 处理进度、错误提示
3. **详细配置**: 高级选项折叠显示
4. **帮助信息**: 工具提示和说明文本

## 无障碍设计 / Accessibility

### 键盘导航 / Keyboard Navigation
- Tab键顺序遵循逻辑流程
- Enter键确认，Escape键取消
- 方向键在列表中导航

### 屏幕阅读器支持 / Screen Reader Support  
- 所有交互元素都有适当的标签
- 状态变化会被语音播报
- 表单验证错误有明确描述

### 视觉辅助 / Visual Aids
- 支持高对比度模式
- 支持放大显示
- 颜色信息不是唯一的识别方式（配合图标）

## 错误处理界面 / Error Handling UI

### 错误提示样式 / Error Message Styles
```
┌─────────────────────────────────────────────────────────────┐
│ ⚠️ 配置错误                                                  │
│ 指定的文件夹不存在：/invalid/path                           │
│ 请检查路径是否正确并重试。              [重试] [取消]       │
└─────────────────────────────────────────────────────────────┘
```

### 进度指示器 / Progress Indicators
```
处理中... [████████████░░░░░░░░] 60%
正在索引文件: document.txt (120/200)
[取消处理]
```

这个界面指南涵盖了知识库功能的所有主要界面元素和交互模式，为开发者和用户提供清晰的使用参考。